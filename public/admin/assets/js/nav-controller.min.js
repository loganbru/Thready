const initNavController = () => {
	let currentPath = window.location.pathname

	let currentPathLinkNodeList = document.querySelectorAll(
		`[href="${currentPath}"]`
	)

	currentPathLinkNodeList.forEach((element, index) => {
		if (element.classList.contains('nav-link')) {
			// element is a nav-link, now we check if it is a dropdown
			if (element.parentElement.nodeName === 'DIV') {
				// element is a standalone nav-link, not in a dropdown. Just add 'active' class and exit function
				element.classList.add('active')
				return
			}

			if (element.parentElement.nodeName === 'LI') {
				// element is contained in a dropdown. Add 'active' class and expand the dropdown

				// 1. set active class
				element.classList.add('active')

				// 2. find dropdown element
				let dropdownId = element.parentElement.parentElement.id
				let dropdownElement = document.querySelectorAll(
					`[href="#${dropdownId}"]`
				)[0]

				// 3. set aria-expanded to true
				dropdownElement.setAttribute('aria-expanded', true)

				// 4. add 'show' class to ul
				element.parentElement.parentElement.classList.add('show')

				return
			}
		}
	})
}

initNavController()
